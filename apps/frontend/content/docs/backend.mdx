---
title: Backend Documentation
description: Robust REST API built with NestJS 11 and Prisma.
---

## 1. Key Features

<Cards>
  <Card title="Framework" href="https://nestjs.com/" icon={<ServerIcon />}>
    NestJS 11
  </Card>
  <Card title="Database" href="https://www.postgresql.org/" icon={<DatabaseIcon />}>
    PostgreSQL (Docker)
  </Card>
  <Card title="ORM" href="https://www.prisma.io/" icon={<DatabaseIcon />}>
    Prisma Client v7
  </Card>
  <Card title="Architecture" icon={<ServerIcon />}>
    Modular & Controller-based
  </Card>
  <Card title="Monorepo" href="/docs/backend#4-monorepo-integration" icon={<BoxIcon />}>
    Shared types from `@repo/shared`
  </Card>
</Cards>

## 2. Directory Structure

```txt
apps/backend/
├── src/                 # Source code
│   ├── *.module.ts      # Domain modules
│   ├── *.controller.ts  # API Endpoints
│   └── *.service.ts     # Business Logic
├── prisma/              # Database Schema & Seeds
│   └── schema.prisma    # Prisma Definition
├── test/                # E2E Tests
└── Dockerfile           # Backend Containerization
```

## 3. Development

The backend API runs on [http://localhost:3001](http://localhost:3001).

<Tabs items={['pnpm', 'docker']}>
  <Tab value="pnpm">
    ```bash
    pnpm --filter backend dev
    ```
  </Tab>
  <Tab value="docker">
    ```bash
    docker compose up backend
    ```
  </Tab>
</Tabs>

### Database Setup

<Callout title="PostgreSQL & Prisma" type="info">
  The database is managed via Docker and [Prisma](https://www.prisma.io/docs/getting-started).
</Callout>

<Tabs items={['CLI', 'GUI']}>
  <Tab value="CLI">
    - **Start Database**: `docker compose up db -d`
    - **Migrations**: `pnpm --filter backend prisma:migrate`
  </Tab>
  <Tab value="GUI">
    - **Prisma Studio**: 
    ```bash
    pnpm --filter backend prisma:studio
    ```
    Access the visual editor at [http://localhost:5555](http://localhost:5555).
  </Tab>
</Tabs>

---

<Callout title="Data Safety" type="error">
  Never run `prisma migrate reset` in production as it will delete all data.
</Callout>

## 4. Monorepo Integration

All common interfaces, DTOs, and validation logic MUST reside in the shared package to ensure end-to-end type safety between the [Frontend](/docs/frontend) and the Backend.

```typescript
// Shared DTO usage in controller
import { CreateUserDto } from "@repo/shared";
```

## 5. Testing



| Type | Command |

| :--- | :--- |

| Unit Tests | `pnpm --filter backend test` |

| E2E Tests | `pnpm --filter backend test:e2e` |



## 6. Authentication



The backend implements a multi-strategy authentication system using [Passport.js](https://docs.nestjs.com/recipes/passport).



### Strategies



- **GitHub OAuth (`GithubStrategy`)**: Handles redirection to GitHub and callback processing. It automatically creates a new user in the database upon the first successful login.

- **JWT (`JwtStrategy`)**: Validates session tokens passed in the `Authorization` header as a Bearer token.



### Endpoints



| Endpoint | Method | Guard | Description |

| :--- | :--- | :--- | :--- |

| `/auth/github` | `GET` | `github` | Redirects the user to GitHub for authorization. |

| `/auth/github/callback` | `GET` | `github` | Handles the return from GitHub and issues a JWT. |

| `/auth/profile` | `GET` | `jwt` | Returns the currently authenticated user's profile. |



### Environment Variables



The following variables are required in `apps/backend/.env`:

- `GITHUB_CLIENT_ID`: Your GitHub OAuth App Client ID.

- `GITHUB_CLIENT_SECRET`: Your GitHub OAuth App Client Secret.

- `GITHUB_CALLBACK_URL`: Typically `http://localhost:3001/auth/github/callback`.

- `JWT_SECRET`: Secret key used to sign session tokens.

- `FRONTEND_URL`: URL of the frontend application (for redirection).
